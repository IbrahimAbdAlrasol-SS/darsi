# ุชูุฑูุฑ ุฅููุงููุฉ ุงูุชูููุฐ - ูุธุงู ุฅุฏุงุฑุฉ ุงูุดุนุจ ูุงููููุงุช

## ๐ ููุฎุต ุงููุชุทูุจุงุช

ุงููุธุงู ุงูุฌุฏูุฏ ุณูููู ุจุณูุทุงู ุฌุฏุงู:
- **ุงููุงูู (Superadmin)**: ูุถูู ูุฑุงุญู (ุดุนุจ) ููุนููู ูุณุคูู ูุงุญุฏ ููู ูุฑุญูุฉ
- **ุงููุณุคูู (Manager)**: ูุถูู ููุงุฏ ูููุฑุญูุฉ ููุฑูุน ูููุงุช ููู ูุงุฏุฉ (ูุน ุชุณููุฉ ุงููููุงุช)
- **ุงููุณุชุฎุฏู ุงูุนุงุฏู**: ูุฑู ุงููุฑุงุญู โ ุงูููุงุฏ โ ุงููููุงุช โ ููููู ุชุญููู ุงููููุงุช

---

## โ ุฅููุงููุฉ ุงูุชูููุฐ: **ูููู ุชูุงูุงู**

ุฌููุน ุงููุชุทูุจุงุช ูุงุจูุฉ ููุชูููุฐ ุจุณูููุฉ ุจุงุณุชุฎุฏุงู ุงูุจููุฉ ุงูุญุงููุฉ.

---

## ๐๏ธ ุงูุชุบููุฑุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุฌุฏุงูู ุงูุฌุฏูุฏุฉ ุงููุทููุจุฉ:

#### 1. ุฌุฏูู `subjects` (ุงูููุงุฏ)
```sql
CREATE TABLE subjects (
    subject_id INTEGER PRIMARY KEY AUTOINCREMENT,
    class_id INTEGER NOT NULL,
    subject_name TEXT NOT NULL,
    created_date DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (class_id) REFERENCES classes (class_id),
    UNIQUE(class_id, subject_name)
)
```

#### 2. ุฌุฏูู `files` (ุงููููุงุช)
```sql
CREATE TABLE files (
    file_id INTEGER PRIMARY KEY AUTOINCREMENT,
    subject_id INTEGER NOT NULL,
    telegram_file_id TEXT NOT NULL,
    file_name TEXT NOT NULL,  -- ุงุณู ุงูููู ุงููุฎุตุต
    uploaded_by INTEGER NOT NULL,
    upload_date DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (subject_id) REFERENCES subjects (subject_id),
    FOREIGN KEY (uploaded_by) REFERENCES users (user_id)
)
```

### ุงูุฌุฏุงูู ุงููุญุฐููุฉ:
- โ `students` - ุญุฐู
- โ `exams` - ุญุฐู
- โ `submissions` - ุญุฐู
- โ `reminders` - ุญุฐู
- โ `messages` - ุญุฐู
- โ `class_blocks` - ุญุฐู
- โ `group_blocks` - ุญุฐู
- โ `reminder_schedules` - ุญุฐู
- โ `registration_links` - ุญุฐู
- โ `link_registrations` - ุญุฐู
- โ `groups` - ุญุฐู (ุงูุดุนุจ ูุณุชููุฉ ุงูุขู)

### ุงูุฌุฏุงูู ุงููุนุฏููุฉ:
- โ `classes` - ุณูุชู ุชุจุณูุทูุง (ุฅุฒุงูุฉ group_id)
- โ `users` - ูุจูู ููุง ูู (ูููุงูู ูุงููุณุคูููู ููุท)
- โ `logs` - ูุจูู (ููุชุณุฌูู)

---

## ๐ ุงูุชุบููุฑุงุช ูู ูููุงุช Handlers

### ุงููููุงุช ุงููุญุฐููุฉ ุจุงููุงูู:
1. โ `handlers/student.py` - ุญุฐู (ูุง ููุฌุฏ ุชุณุฌูู ุทูุงุจ)
2. โ `handlers/teacher.py` - ุญุฐู (ูุง ููุฌุฏ ูุนูููู)
3. โ `handlers/broadcast.py` - ุญุฐู (ูุง ููุฌุฏ ุจุซ)
4. โ `handlers/manual_registration.py` - ุญุฐู (ูุง ููุฌุฏ ุชุณุฌูู)
5. โ `handlers/registration_links.py` - ุญุฐู (ูุง ููุฌุฏ ุฑูุงุจุท)
6. โ `handlers/owner.py` - ุญุฐู (ูุง ููุฌุฏ ูุฌููุนุงุช)

### ุงููููุงุช ุงููุนุฏููุฉ:

#### 1. `handlers/admin.py`
**ุงููุธุงุฆู ุงูุฌุฏูุฏุฉ:**
- โ ุฅุถุงูุฉ ูุฑุญูุฉ (class) ุฌุฏูุฏุฉ
- โ ุชุนููู ูุณุคูู ูููุฑุญูุฉ (manager_id)
- โ ุนุฑุถ ุฌููุน ุงููุฑุงุญู
- โ ุญุฐู ูุฑุญูุฉ
- โ ุนุฑุถ ูุณุคูู ุงููุฑุญูุฉ

**ุงููุธุงุฆู ุงููุญุฐููุฉ:**
- โ ุฅุฏุงุฑุฉ ุงููุฌููุนุงุช
- โ ุงูุฅุญุตุงุฆูุงุช ุงููุชุนููุฉ ุจุงูุทูุงุจ
- โ ุงูุจุซ
- โ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู (ูู ูููู ููุงู ุชุณุฌูู)

#### 2. `handlers/manager.py`
**ุงููุธุงุฆู ุงูุฌุฏูุฏุฉ:**
- โ ุนุฑุถ ุงูููุงุฏ ูู ุงููุฑุญูุฉ
- โ ุฅุถุงูุฉ ูุงุฏุฉ ุฌุฏูุฏุฉ
- โ ุนุฑุถ ูููุงุช ูุงุฏุฉ ูุญุฏุฏุฉ
- โ ุฑูุน ููู ููุงุฏุฉ (ูุน ุฅุฏุฎุงู ุงุณู ุงูููู)
- โ ุญุฐู ููู

**ุงููุธุงุฆู ุงููุญุฐููุฉ:**
- โ ุฅุฏุงุฑุฉ ุงูุงูุชุญุงูุงุช
- โ ูุฑุงุฌุนุฉ ุงูุชุณูููุงุช
- โ ุงูุจุซ ููุทูุงุจ
- โ ุฅุฏุงุฑุฉ ุงูุทูุงุจ

#### 3. `handlers/common.py`
**ุงููุธุงุฆู ุงูุฌุฏูุฏุฉ:**
- โ ุนูุฏ `/start`: ุนุฑุถ ูุงุฆูุฉ ุงููุฑุงุญู (classes)
- โ ุนูุฏ ุงุฎุชูุงุฑ ูุฑุญูุฉ: ุนุฑุถ ุงูููุงุฏ (subjects)
- โ ุนูุฏ ุงุฎุชูุงุฑ ูุงุฏุฉ: ุนุฑุถ ุงููููุงุช (files)
- โ ุฒุฑ ููู ููู ููุชุญููู
- โ ุฒุฑ "ุชุญููู ุงููู" ูุชุญููู ุฌููุน ูููุงุช ุงููุงุฏุฉ

**ุงููุธุงุฆู ุงููุญุฐููุฉ:**
- โ ุงูุชุณุฌูู ูู ุงููุฑุงุญู
- โ ุนุฑุถ ุงูุงูุชุญุงูุงุช
- โ ุนุฑุถ ุงููุชุงุฆุฌ
- โ ุงุฎุชูุงุฑ ุงููุฌููุนุงุช

---

## ๐๏ธ ุงูุชุบููุฑุงุช ูู Middlewares

### `middlewares/auth.py`
**ุงูุชุนุฏููุงุช:**
- โ ุฅุฒุงูุฉ ูุญุต ุชุณุฌูู ุงูุทูุงุจ
- โ ุงูุณูุงุญ ูุฌููุน ุงููุณุชุฎุฏููู ุจุงููุตูู (ูุง ุญุงุฌุฉ ูุชุณุฌูู)
- โ ุงูุงุญุชูุงุธ ุจูุญุต Superadmin ู Manager ููุท

### `middlewares/database.py`
**ุงูุชุนุฏููุงุช:**
- โ ุฅุฒุงูุฉ ุฌูุจ ูุนูููุงุช ุงูุทูุงุจ
- โ ุชุจุณูุท ุงูุจูุงูุงุช ุงููุฑุณูุฉ

### `middlewares/force_join.py`
**ุงูุชุนุฏููุงุช:**
- โ ูููู ุญุฐูู ุฅุฐุง ูู ูุนุฏ ูุทููุจุงู

---

## ๐จ ุงูุชุบููุฑุงุช ูู Keyboards

### `keyboards/inline.py`
**ุงูุฅุถุงูุงุช ุงูุฌุฏูุฏุฉ:**
- โ `classes_list()` - ูุงุฆูุฉ ุงููุฑุงุญู ูููุณุชุฎุฏููู
- โ `subjects_list()` - ูุงุฆูุฉ ุงูููุงุฏ
- โ `files_list()` - ูุงุฆูุฉ ุงููููุงุช ูุน ุฒุฑ ุชุญููู ุงููู
- โ `admin_classes_management()` - ุฅุฏุงุฑุฉ ุงููุฑุงุญู ูููุงูู
- โ `manager_subjects_menu()` - ูุงุฆูุฉ ุงูููุงุฏ ูููุณุคูู
- โ `manager_subject_files()` - ุฅุฏุงุฑุฉ ูููุงุช ูุงุฏุฉ ูุญุฏุฏุฉ

**ุงููุญุฐููุงุช:**
- โ ุฌููุน ุงูููุจูุฑุฏุงุช ุงููุชุนููุฉ ุจุงูุทูุงุจ
- โ ุฌููุน ุงูููุจูุฑุฏุงุช ุงููุชุนููุฉ ุจุงูุงูุชุญุงูุงุช
- โ ุฌููุน ุงูููุจูุฑุฏุงุช ุงููุชุนููุฉ ุจุงูุจุซ

---

## ๐ ุงูุชุบููุฑุงุช ูู States

### `states/registration.py`
**ุงูุฅุถุงูุงุช ุงูุฌุฏูุฏุฉ:**
- โ `SubjectStates.waiting_for_subject_name` - ุงูุชุธุงุฑ ุงุณู ุงููุงุฏุฉ
- โ `FileStates.waiting_for_file_name` - ุงูุชุธุงุฑ ุงุณู ุงูููู ุจุนุฏ ุฑูุนู

**ุงููุญุฐููุงุช:**
- โ ุฌููุน ุญุงูุงุช ุงูุชุณุฌูู
- โ ุฌููุน ุญุงูุงุช ุงูุงูุชุญุงูุงุช
- โ ุฌููุน ุญุงูุงุช ุงูุจุซ

---

## ๐๏ธ ุงูุชุบููุฑุงุช ูู Utils

### ุงููููุงุช ุงููุญุฐููุฉ:
1. โ `utils/scheduler.py` - ุญุฐู
2. โ `utils/smart_reminders.py` - ุญุฐู
3. โ `utils/broadcast.py` - ุญุฐู

### ุงููููุงุช ุงููุจูุงุฉ:
- โ `utils/logger.py` - ูุจูู
- โ `utils/helpers.py` - ูุจูู (ูุนุฏู)

---

## ๐ ุงูุชุบููุฑุงุช ูู main.py

**ุงูุชุนุฏููุงุช:**
- โ ุญุฐู ุฅุนุฏุงุฏ reminder systems
- โ ุฅุฒุงูุฉ routers ุงููุญุฐููุฉ
- โ ุชุจุณูุท ุงูุฅุนุฏุงุฏ

---

## ๐ฏ ุชุฏูู ุงูุนูู (Flow)

### ูููุงูู (Superadmin):
```
/start โ ููุญุฉ ุงููุงูู
  โโ ุฅุฏุงุฑุฉ ุงููุฑุงุญู
  โ   โโ ุฅุถุงูุฉ ูุฑุญูุฉ ุฌุฏูุฏุฉ
  โ   โ   โโ ุฅุฏุฎุงู ุงุณู ุงููุฑุญูุฉ
  โ   โ   โโ ุชุนููู ูุณุคูู (ID ุฃู username)
  โ   โโ ุนุฑุถ ุงููุฑุงุญู
  โ   โ   โโ ุนุฑุถ ูุณุคูู ูู ูุฑุญูุฉ
  โ   โโ ุญุฐู ูุฑุญูุฉ
```

### ูููุณุคูู (Manager):
```
/start โ ููุญุฉ ุงููุณุคูู
  โโ ุงููุฑุงุญู ุงูุชู ูุฏูุฑูุง
      โโ [ุงุณู ุงููุฑุญูุฉ]
          โโ ุฅุถุงูุฉ ูุงุฏุฉ
          โ   โโ ุฅุฏุฎุงู ุงุณู ุงููุงุฏุฉ
          โโ ุงูููุงุฏ
          โ   โโ [ุงุณู ุงููุงุฏุฉ]
          โ       โโ ุฅุฑูุงู ููู
          โ       โ   โโ ุฅุฑุณุงู ุงูููู
          โ       โ   โโ ุฅุฏุฎุงู ุงุณู ุงูููู
          โ       โโ ุงููููุงุช
          โ           โโ ุญุฐู ููู
```

### ูููุณุชุฎุฏู ุงูุนุงุฏู:
```
/start โ ูุงุฆูุฉ ุงููุฑุงุญู
  โโ [ุงุณู ุงููุฑุญูุฉ]
      โโ ุงูููุงุฏ
          โโ [ุงุณู ุงููุงุฏุฉ]
              โโ [ุงุณู ุงูููู 1] โ ุฒุฑ ุชุญููู
              โโ [ุงุณู ุงูููู 2] โ ุฒุฑ ุชุญููู
              โโ [ุงุณู ุงูููู 3] โ ุฒุฑ ุชุญููู
              โโ [ุชุญููู ุงููู] โ ุฒุฑ ูุชุญููู ุฌููุน ุงููููุงุช
```

---

## โ๏ธ ุงููุธุงุฆู ูู DatabaseManager

### ุงูุฅุถุงูุงุช ุงูุฌุฏูุฏุฉ:
- โ `add_subject(class_id, subject_name)` - ุฅุถุงูุฉ ูุงุฏุฉ
- โ `get_class_subjects(class_id)` - ุฌูุจ ููุงุฏ ุงููุฑุญูุฉ
- โ `get_subject(subject_id)` - ุฌูุจ ูุงุฏุฉ ูุญุฏุฏุฉ
- โ `delete_subject(subject_id)` - ุญุฐู ูุงุฏุฉ
- โ `add_file(subject_id, telegram_file_id, file_name, uploaded_by)` - ุฅุถุงูุฉ ููู
- โ `get_subject_files(subject_id)` - ุฌูุจ ูููุงุช ูุงุฏุฉ
- โ `get_file(file_id)` - ุฌูุจ ููู ูุญุฏุฏ
- โ `delete_file(file_id)` - ุญุฐู ููู
- โ `get_all_classes()` - ุฌูุจ ุฌููุน ุงููุฑุงุญู (ุจุฏูู group_id)

### ุงููุญุฐููุงุช:
- โ ุฌููุน ูุธุงุฆู ุงูุทูุงุจ
- โ ุฌููุน ูุธุงุฆู ุงูุงูุชุญุงูุงุช
- โ ุฌููุน ูุธุงุฆู ุงูุชุณูููุงุช
- โ ุฌููุน ูุธุงุฆู ุงูุจุซ
- โ ุฌููุน ูุธุงุฆู ุงูุญุธุฑ
- โ ุฌููุน ูุธุงุฆู ุงูุฑูุงุจุท

---

## ๐ ุงูุฃูุงู ูุงูุชุญูู

- โ ุงููุงูู ููุท ููููู ุฅุถุงูุฉ/ุญุฐู ุงููุฑุงุญู
- โ ุงููุณุคูู ููุท ููููู ุฅุถุงูุฉ/ุญุฐู ุงูููุงุฏ ูุงููููุงุช ูู ูุฑุงุญูู
- โ ุฌููุน ุงููุณุชุฎุฏููู ูููููู ุนุฑุถ ุงููุฑุงุญู ูุงูููุงุฏ ูุงููููุงุช
- โ ูุง ููุฌุฏ ุชุณุฌูู ูุทููุจ - ุงููุธุงู ููุชูุญ ููุฌููุน

---

## ๐ ุชูุฏูุฑ ุงูููุช ูุงูุฌูุฏ

- **ูุงุนุฏุฉ ุงูุจูุงูุงุช**: 2-3 ุณุงุนุงุช (ุฅูุดุงุก ุฌุฏุงูู ุฌุฏูุฏุฉุ ุญุฐู ุงููุฏููุฉุ ุชุนุฏูู ุงููุชุจููุฉ)
- **Handlers**: 4-5 ุณุงุนุงุช (ุญุฐู ุงููููุงุช ุงููุฏููุฉุ ุชุนุฏูู ุงููุชุจููุฉุ ุฅูุดุงุก ุงูุฌุฏูุฏุฉ)
- **Keyboards**: 1-2 ุณุงุนุงุช (ุฅูุดุงุก ููุจูุฑุฏุงุช ุฌุฏูุฏุฉ)
- **States**: 1 ุณุงุนุฉ (ุฅูุดุงุก ุญุงูุงุช ุฌุฏูุฏุฉ)
- **DatabaseManager**: 2-3 ุณุงุนุงุช (ุฅุถุงูุฉ ูุธุงุฆู ุฌุฏูุฏุฉุ ุญุฐู ุงููุฏููุฉ)
- **Testing**: 2-3 ุณุงุนุงุช (ุงุฎุชุจุงุฑ ุงูุชุฏููุงุช)

**ุฅุฌูุงูู**: ุญูุงูู 12-17 ุณุงุนุฉ ุนูู

---

## โ ุงูุฎูุงุตุฉ

**ุงููุธุงู ูุงุจู ููุชูููุฐ ุชูุงูุงู** ูุณุชููู ุงููุชูุฌุฉ:
- โ ูุธุงู ุจุณูุท ููุงุถุญ
- โ ุณูู ุงูุงุณุชุฎุฏุงู
- โ ุงุญุชุฑุงูู
- โ ุฎุงูู ูู ุงูุชุนููุฏุงุช ุบูุฑ ุงูุถุฑูุฑูุฉ
- โ ุณุฑูุน ุงูุงุณุชุฌุงุจุฉ

---

## โ๏ธ ููุงุญุธุงุช ูููุฉ

1. **ูุง ููุฌุฏ ูุณุฎ ุงุญุชูุงุทู ุชููุงุฆู** - ูุฌุจ ุนูู backup ูุจู ุงูุจุฏุก
2. **ุงูุจูุงูุงุช ุงููุฏููุฉ** - ุฌููุน ุจูุงูุงุช ุงูุทูุงุจ ูุงูุงูุชุญุงูุงุช ุณุชูุญุฐู
3. **ุงูุชูุงูู**: ุงููุธุงู ุณูุนูู ูุน aiogram 3.x ุงูุญุงูู

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

1. โ ุฅูุดุงุก backup ููุจูุงูุงุช ุงูุญุงููุฉ
2. โ ุชุนุฏูู ูุงุนุฏุฉ ุงูุจูุงูุงุช (ุญุฐู ุฌุฏุงูู ูุฏููุฉุ ุฅูุดุงุก ุฌุฏูุฏุฉ)
3. โ ุชุญุฏูุซ DatabaseManager
4. โ ุญุฐู Handlers ุบูุฑ ุงููุทููุจุฉ
5. โ ุชุนุฏูู Handlers ุงููุชุจููุฉ
6. โ ุฅูุดุงุก Keyboards ุฌุฏูุฏุฉ
7. โ ุฅูุดุงุก States ุฌุฏูุฏุฉ
8. โ ุชุญุฏูุซ main.py
9. โ ุงุฎุชุจุงุฑ ุงููุธุงู

---

**ุชุงุฑูุฎ ุงูุชูุฑูุฑ**: $(date)
**ุงูุญุงูุฉ**: โ ุฌุงูุฒ ููุชูููุฐ

